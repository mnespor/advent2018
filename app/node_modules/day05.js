'use strict'

const R = require('ramda')
const fs = require('fs')

const input = R.trim(fs.readFileSync('input/05.txt', { encoding: 'utf8' }))
const alphabet = R.map(String.fromCharCode, R.range('a'.charCodeAt(0), 'z'.charCodeAt(0) + 1))

const pairs = R.concat(
    R.zip(alphabet, R.map(R.toUpper, alphabet)),
    R.zip(R.map(R.toUpper, alphabet), alphabet))
const pattern = R.join('|', R.map(R.join(''), pairs))
const regex = R.constructN(2, RegExp)(pattern, 'g')

const polymer = R.until(R.complement(R.test(regex)), R.replace(regex, ''))(input)
console.log('part 1:', polymer.length)

for (let letter of alphabet) {
    const preprocessingRegex = R.constructN(2, RegExp)(letter, 'gi')
    const preprocessedPolymer = R.replace(preprocessingRegex, '', input)
    console.log(letter, ':', R.until(R.complement(R.test(regex)), R.replace(regex, ''))(preprocessedPolymer).length)
}
